# Maintainer: Joshua Rubin <joshua@rubixlinux.org>

pkgname=ieee80211
pkgver=1.1.12
pkgrel=1
pkgdesc="A generic ieee80211 networking stack for the Linux kernel."
url="http://ieee80211.sourceforge.net"
source=(http://dl.sourceforge.net/sourceforge/$pkgname/$pkgname-$pkgver.tgz)
install=$pkgname.install
md5sums=('20da3f23dad2356da8f14d8b3d88d58e')

vver26=2.6.15.5-Rubix

## Todo:
##   None

## Notes:
##   None

## Changelog:
##   rel1: upgraded to 1.1.12, built for 2.6.15.5 2006.03.03
##   rel2: rebuilt for 2.6.15.4 2006.02.12
##   rel1: upgraded to 1.1.11, rebuilt for 2.6.15.3 2006.02.07
##   rel2: rebuilt for 2.6.15.2 2006.01.31
##   rel1: upgraded to 1.1.9, built for 2.6.15.1 2006.01.20
##   rel4: rebuilt for 2.6.15 (rel2 and 3 were only used internally) 2006.01.10
##   rel1: rebuilt for kernel 2.6.14.2-Rubix 2005.11.12
##   rel1: upgraded to 1.1.6 2005.10.27
##   rel1: initial rubix release

build() {

	cd $startdir/src/$pkgname-$pkgver

	make KSRC=/usr/src/linux-$vver26 || return 1

	mkdir -p $startdir/pkg/usr/include/net
	cp	-a				\
		net/ieee80211_radiotap.h	\
		net/ieee80211.h			\
		net/ieee80211_crypt.h		\
	$startdir/pkg/usr/include/net

	mkdir -p	$startdir/pkg/lib/modules/$vver26/net/$pkgname
	cp *.ko		$startdir/pkg/lib/modules/$vver26/net/$pkgname

	mkdir -p $startdir/pkg/usr/doc/$pkgname-$pkgver
	cp	-a		\
		CHANGES		\
		GIT_SHA1	\
		INSTALL		\
		LICENSE		\
	$startdir/pkg/usr/doc/$pkgname-$pkgver
	chmod 644 $startdir/pkg/usr/doc/$pkgname-$pkgver/*

	cd	$startdir
	find	$startdir/pkg/lib/modules -type f -name *.ko -exec gzip {} \;

}
