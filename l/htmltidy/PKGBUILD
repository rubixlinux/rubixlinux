# Maintainer: Joshua Rubin <joshua@rubix-os.org>

pkgname=htmltidy
pkgver=20051026
pkgrel=1
pkgdesc="html tidy provides a simple way to fix HTML mistakes automatically and tidy up sloppy editing into nicely layed out markup. It also works great on the atrociously hard to read markup generated by specialized HTML editors and conversion tools, and can help you identify where you need to pay further attention on making your pages more accessible to people with disabilities. HTML tidy was originally developed by Dave Raggett."
url="http://tidy.sourceforge.net"
depends=('glibc')
source=(http://tidy.sourceforge.net/src/tidy_src.tgz	\
	http://tidy.sourceforge.net/docs/tidy_docs.tgz	)
md5sums=('1e39fafd6808978871346658c8da1454' \
	 '86de2f198e57399c063d2567b2a25628' )

#Todo:
#None

#Notes:
#This has a crazy 2 build process in order to get all the docs and links

#Changelog:
#rel1: Initial Rubix release 2005.05.09

build(){

	cd $startdir/src/tidy/build/gmake

	sed -i "s|^runinst_prefix=/usr/local|runinst_prefix=$startdir/pkg/usr|g" Makefile
	sed -i "s|^devinst_prefix=/usr/local|devinst_prefix=$startdir/pkg/usr|g" Makefile
	sed -i "s|^CFLAGS= -Wall|CFLAGS=$CFLAGS|" Makefile

	make || return 1
	make install
	make clean

	cd ../..

	sh build/gnuauto/setup.sh
	./configure --prefix=/usr
	make || return 1
	make DESTDIR=$startdir/pkg install

	mkdir -p $startdir/pkg/usr/doc
	cp -a htmldoc $startdir/pkg/usr/doc/$pkgname-$pkgver

	chown -R root.bin $startdir/pkg/usr/bin

}
